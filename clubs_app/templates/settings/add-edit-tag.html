{% extends 'main.html' %}

{% load static %}
{% block title %}Tag - PES University{% endblock title %}
{% block description %}<meta name="description" content="Events - PES University" />{% endblock %}
{% block content %}
<!-- main -->
<div id="main">
    <!-- header -->
    {% include 'navbar.html' %}
    <!-- header end  -->
    <!-- wrapper  -->	
    <div id="wrapper">
        <!-- dashbard-menu-wrap -->
        <div class="dashbard-menu-overlay"></div>
        <!-- sidebar menu start -->
        {% include 'sidebar.html' %}
        <!-- sidebar menu end -->
        <!-- dashbard-menu-wrap end  -->		
        <!-- content -->	
        <div class="dashboard-content">
            <div class="dashboard-menu-btn color-bg"><span><i class="fas fa-bars"></i></span>Dasboard Menu</div>
            <div class="container dasboard-container">
                <!-- dashboard-title -->	
                <div class="dashboard-title fl-wrap">
                    <div class="dashboard-title-item"><span>Tag </span></div>
                    <div class="dashbard-menu-header">
                        <div class="dashbard-menu-avatar fl-wrap">
                            <img src="{% static 'images/admin.jpg' %}" alt="">
                            <h4><span>{{ user.name | capfirst}}</span></h4>
                        </div>
                        <a href="{% url 'logout-page' %}" class="log-out-btn   tolt" data-microtip-position="bottom" data-tooltip="Log Out"><i class="far fa-power-off"></i></a>
                    </div>			
                </div>
                <!-- dashboard-title end -->
                <!-- dasboard-wrapper-->
                <div class="dasboard-wrapper fl-wrap no-pag">
                    <div class="row">
                        <div class="col-md-10">
                            {% if add_tag %}
                            <div class="dasboard-widget-title fl-wrap">
                                <h5><i class="fal fa-tags"></i>Add Tag</h5>
                            </div>
                            <div class="dasboard-widget-box fl-wrap">
                                <div class="custom-form">
                                    <form action="{% url 'tag-settings' %}" method="post" enctype="multipart/form-data">
                                        {% csrf_token %}
                                        {% if add_tag.tag.errors %}
                                            <div class="text-danger">{{ add_tag.tag.errors|join:", " }}</div>
                                        {% endif %}
                                        <label> Tag <span class="dec-icon"><i class="fal fa-tags"></i></span></label>
                                        {{ add_tag.tag }}

                                        {% if add_tag.tag_navbar.errors %}
                                            <div class="text-danger">{{ add_tag.tag_navbar.errors|join:", " }}</div>
                                        {% endif %}
                                        <label> Display on Navbar <span class="dec-icon"><i class="fa fa-bars"></i></span></label>
                                        {{ add_tag.tag_navbar }}

                                        {% if add_tag.tag_priority.errors %}
                                            <div class="text-danger">{{ add_tag.tag_priority.errors|join:", " }}</div>
                                        {% endif %}
                                        <label> Tag Priority <span class="dec-icon"><i class="fa fa-random"></i></span></label>
                                        {{ add_tag.tag_priority }}

                                        {% if add_tag.tag_permalink.errors %}
                                            <div class="text-danger">{{ add_tag.tag_permalink.errors|join:", " }}</div>
                                        {% endif %}
                                        <label> Tap Permalink <span class="dec-icon"><i class="far fa-external-link-alt"></i></span></label>
                                        {{ add_tag.tag_permalink }}

                                        <div class="">
                                            <label>Display at Navbar </label>
                                            <ul class="fl-wrap filter-tags no-list-style ds-tg">
                                                <li>
                                                    {% for value, label in add_tag.navbar_display.field.choices %}
                                                        {% if value == add_tag.initial.navbar_display %}
                                                            <input type="radio" name="{{ add_tag.navbar_display.name }}" value="{{ value }}" checked>
                                                        {% else %}
                                                            <input type="radio" name="{{ add_tag.navbar_display.name }}" value="{{ value }}">
                                                        {% endif %}
                                                        <label class="radio inline">{{ label }}</label>
                                                    {% endfor %}
            
                                                </li>
                                            </ul>      
                                        </div>

                                        <input type="submit" class="btn  color-bg float-btn" value="   Add   " style="border:0px;">							
                                    
                                    </form>
                                </div>
                            </div>
                            {% else %}
                            <div class="dasboard-widget-title fl-wrap">
                                <h5><i class="fal fa-tags"></i>Edit Tag</h5>
                            </div>
                            <div class="dasboard-widget-box fl-wrap">
                                <div class="custom-form">
                                    <form action="{% url 'edit-single-tag' edit_tag.instance.tag_id %}" method="post" enctype="multipart/form-data">
                                        {% csrf_token %}
                                        <div class="col-sm-12">	
                                            {% if edit_tag.tag.errors %}
                                                <div class="text-danger">{{ edit_tag.tag.errors|join:", " }}</div>
                                            {% endif %}
                                            <label> Tag <span class="dec-icon"><i class="fal fa-tags"></i></span></label>
                                            {{ edit_tag.tag }}

                                            {% if edit_tag.tag_navbar.errors %}
                                                <div class="text-danger">{{ edit_tag.tag_navbar.errors|join:", " }}</div>
                                            {% endif %}
                                            <label> Display on Navbar <span class="dec-icon"><i class="fa fa-bars"></i></span></label>
                                            {{ edit_tag.tag_navbar }}

                                            {% if edit_tag.tag_priority.errors %}
                                            <div class="text-danger">{{ edit_tag.tag_priority.errors|join:", " }}</div>
                                            {% endif %}
                                            <label> Tag Priority <span class="dec-icon"><i class="fa fa-random"></i></span></label>
                                            {{ edit_tag.tag_priority }}

                                            {% if edit_tag.tag_permalink.errors %}
                                                <div class="text-danger">{{ edit_tag.tag_permalink.errors|join:", " }}</div>
                                            {% endif %}
                                            <label> Tap Permalink <span class="dec-icon"><i class="far fa-external-link-alt"></i></span></label>
                                            {{ edit_tag.tag_permalink }}

                                            <div class="">
                                                <label>Display at Navbar </label>
                                                <ul class="fl-wrap filter-tags no-list-style ds-tg">
                                                    <li>
                                                        {% for value, label in edit_tag.navbar_display.field.choices %}
                                                            {% if value == edit_tag.initial.navbar_display %}
                                                                <input type="radio" name="{{ edit_tag.navbar_display.name }}" value="{{ value }}" checked>
                                                            {% else %}
                                                                <input type="radio" name="{{ edit_tag.navbar_display.name }}" value="{{ value }}">
                                                            {% endif %}
                                                            <label class="radio inline">{{ label }}</label>
                                                        {% endfor %}
                
                                                    </li>
                                                </ul>      
                                            </div>
                                            <h5><input type="submit" class="btn  color-bg float-btn" value="   Save   " style="border:0px;"> </h5>
                                        </div>
                                    </form>
                                </div>
                            </div>
                            {% endif %}

                            {% if all_tag %}
                            <div class="dasboard-widget-title dwb-mar fl-wrap margin-top">
                                <h5><i class="fal fa-tags"></i>Tag</h5>
                            </div>
                            <div class="dasboard-widget-box fl-wrap">
                                <div class="custom-form">
                                    {% for tag in all_tag %}
                                    <div class="col-md-4" style="padding: 0px 5px;">
                                    <div class="pass-input-wrap fl-wrap">
                                        <label><span class="dec-icon"><a href="{% url 'edit-single-tag' tag.tag_id %}"  class="tolt" data-microtip-position="top-left" data-tooltip="Edit"><i class="far fa-edit color-blue"></i></a></span></label>
                                        <input type="text" class="pass-input" value="{{ tag.tag }}, {{ tag.tag_priority }}" readonly>
                                        
                                        
                                        <span class="eye"><a href="{% url 'delete-single-tag' tag.tag_id %}" class="tolt" data-microtip-position="top-left" data-tooltip="Delete" ><i class="far fa-trash-alt color-blue"></i></a> </span>
                                        
                                    </div>
                                </div>
                                    {% endfor %}
                                </div>
                            </div>
                            {% endif %}
                        </div>
                        
                    </div>
                </div>
                <!-- dasboard-wrapper end -->	
            </div>
                    
        </div>
        <!-- content end -->	
        <div class="dashbard-bg gray-bg"></div>
    </div>
    <!-- wrapper end -->
</div>
<!-- Main end -->      

{% endblock content %}